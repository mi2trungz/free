<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ª± √°n chia s·∫ª t√†i kho·∫£n mi·ªÖn ph√≠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/otpauth/9.1.4/otpauth.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; }
        .code-font { font-family: 'JetBrains Mono', monospace; }
        .progress-ring { transition: stroke-dashoffset 1s linear; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .info-input { background-color: #f8fafc; border: 1px solid #e2e8f0; color: #334155; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); }
        
        /* Accordion transition */
        .accordion-content {
            transition: all 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            padding-top: 0;
            padding-bottom: 0;
        }
        .accordion-content.open {
            max-height: 600px;
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        /* Custom Scrollbar for Donate List */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }

        /* Hi·ªáu ·ª©ng rung l·∫Øc khi sai m·∫≠t kh·∫©u */
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- MODAL NH·∫¨P M·∫¨T KH·∫®U (Khi b·∫•m v√†o th∆∞ m·ª•c) -->
    <div id="passwordModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden relative">
            <button onclick="closePasswordModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="p-8 text-center">
                <div class="w-14 h-14 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Y√™u c·∫ßu b·∫£o m·∫≠t</h3>
                <p class="text-sm text-gray-500 mb-6">Vui l√≤ng nh·∫≠p m·∫≠t m√£ ƒë·ªÉ truy c·∫≠p danh m·ª•c n√†y.</p>
                
                <div class="space-y-3">
                    <input type="password" id="modalPasswordInput" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all text-center tracking-widest text-lg" placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢" maxlength="4" oninput="checkModalAutoLogin()">
                    <p class="text-xs text-red-500 italic font-medium">L∆∞u √Ω: M·∫≠t kh·∫©u s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi th∆∞·ªùng xuy√™n</p>
                    <button onclick="checkModalPassword()" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200">M·ªü Kh√≥a</button>
                    <button onclick="openInstructions()" class="w-full text-indigo-600 font-semibold py-2 rounded-lg hover:bg-indigo-50 transition-colors text-sm">L·∫•y m√£?</button>
                    <p id="modalLoginError" class="text-red-500 text-sm font-medium hidden mt-2">M·∫≠t m√£ kh√¥ng ƒë√∫ng!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL L∆ØU √ù -->
    <div id="disclaimerModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden">
            <div class="bg-yellow-50 p-6 border-b border-yellow-100 flex items-center gap-3">
                <div class="p-2 bg-yellow-100 rounded-full text-yellow-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                </div>
                <h3 class="text-lg font-bold text-gray-800">L∆∞u √Ω quan tr·ªçng</h3>
            </div>
            <div class="p-6">
                <ul id="disclaimerList" class="space-y-3 text-sm text-gray-600"></ul>
                <button id="confirmBtn" onclick="confirmDisclaimer()" disabled class="mt-6 w-full bg-gray-400 text-white font-bold py-3 rounded-xl transition-all cursor-not-allowed">Vui l√≤ng ch·ªù 3s...</button>
            </div>
        </div>
    </div>

    <!-- MODAL H∆Ø·ªöNG D·∫™N L·∫§Y M√É -->
    <div id="instructionModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden relative">
            <button onclick="closeInstructions()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="p-8">
                <div class="w-14 h-14 bg-indigo-100 rounded-full flex items-center justify-center mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">H∆∞·ªõng d·∫´n l·∫•y m√£</h3>
                <div class="space-y-4 text-sm text-gray-600 mt-4">
                    <p>ƒê·ªÉ nh·∫≠n m·∫≠t m√£ truy c·∫≠p v√†o h·ªá th·ªëng, b·∫°n vui l√≤ng th·ª±c hi·ªán c√°c b∆∞·ªõc sau:</p>
                    <ol class="list-decimal pl-5 space-y-2 marker:text-indigo-600 marker:font-bold">
                        <li>Li√™n h·ªá Admin qua Facebook.</li>
                        <li>G·ª≠i y√™u c·∫ßu "C·∫•p quy·ªÅn truy c·∫≠p 2FA".</li>
                        <li>Admin s·∫Ω x√°c minh v√† g·ª≠i m√£ cho b·∫°n.</li>
                    </ol>
                    <div class="p-3 bg-red-50 text-red-600 text-xs rounded-lg font-medium border border-red-100 flex items-start gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        <span>L∆∞u √Ω: M√£ s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi m·ªói ng√†y.</span>
                    </div>
                    <a href="https://facebook.com/DTH.3006" target="_blank" class="block bg-slate-50 border border-slate-200 p-3 rounded-lg text-center mt-4 hover:bg-indigo-50 hover:border-indigo-200 transition-all group cursor-pointer decoration-0">
                        <p class="text-xs text-gray-500 uppercase font-semibold mb-1">Li√™n h·ªá Admin</p>
                        <div class="text-indigo-600 font-bold group-hover:text-indigo-700 flex items-center justify-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/></svg>
                            Facebook: ƒê√†o Th√°i H·∫£i
                        </div>
                    </a>
                </div>
                <button onclick="closeInstructions()" class="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200">ƒê√£ hi·ªÉu</button>
            </div>
        </div>
    </div>

    <!-- MODAL DONATE -->
    <div id="donateModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden relative border border-gray-100">
            <button onclick="closeDonate()" class="absolute top-4 right-4 p-2 bg-gray-50 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="p-8 text-center">
                <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">üíñ</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">C·∫£m ∆°n t·∫•m l√≤ng c·ªßa b·∫°n!</h3>
                <p class="text-sm text-gray-500 mb-6">S·ª± ·ªßng h·ªô c·ªßa b·∫°n l√† ƒë·ªông l·ª±c l·ªõn ƒë·ªÉ m√¨nh duy tr√¨ v√† ph√°t tri·ªÉn d·ª± √°n n√†y.</p>
                <div class="flex justify-center mb-4">
                    <img src="https://sf-static.upanhlaylink.com/img/image_202512065f13eab34d2f066a8d2fcd562ebad743.jpg" alt="QR Donate" class="w-full max-w-[280px] rounded-xl shadow-lg border border-gray-200 object-cover">
                </div>
                <p class="text-xs text-gray-400 italic mb-6">Qu√©t m√£ ƒë·ªÉ ·ªßng h·ªô Admin nh√©!</p>
                
                <!-- DANH S√ÅCH NG∆Ø·ªúI ·ª¶NG H·ªò -->
                <div class="border-t border-gray-100 pt-4">
                    <p class="text-xs font-bold text-gray-600 mb-3 uppercase tracking-wide">Xin tr√¢n tr·ªçng c·∫£m ∆°n r·∫•t nhi·ªÅu t·ªõi:</p>
                    <div class="space-y-2 max-h-32 overflow-y-auto custom-scrollbar px-1">
                        <div class="flex justify-between items-center text-xs bg-gray-50 p-2 rounded-lg border border-gray-100">
                            <span class="font-medium text-gray-700">Le Tuan Huy</span>
                            <span class="font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">3.000ƒë</span>
                        </div>
                        <div class="flex justify-between items-center text-xs bg-gray-50 p-2 rounded-lg border border-gray-100">
                            <span class="font-medium text-gray-700">Nguyen Ngoc Hang</span>
                            <span class="font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">5.000ƒë</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL H∆Ø·ªöNG D·∫™N CAPCUT -->
    <div id="capcutGuideModal" class="hidden fixed inset-0 z-50 flex items-center justify-center modal-backdrop p-4 fade-in">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden relative border border-gray-100">
            <button onclick="closeCapcutGuide()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
            <div class="p-6">
                <h3 id="capcutGuideTitle" class="text-lg font-bold text-gray-800 mb-4">H∆∞·ªõng d·∫´n</h3>
                <div id="capcutGuideContent" class="space-y-3 text-sm text-gray-600"></div>
                <button onclick="closeCapcutGuide()" class="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-2xl hover:bg-indigo-700 transition-colors">ƒê√£ hi·ªÉu</button>
            </div>
        </div>
    </div>

    <!-- ·ª®NG D·ª§NG CH√çNH -->
    <div id="mainApp" class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden h-auto flex flex-col transition-opacity duration-500 relative">
        <div class="bg-indigo-600 p-6 shadow-md z-10 text-center relative">
            <h1 class="text-xl font-bold text-white">D·ª± √°n chia s·∫ª t√†i kho·∫£n mi·ªÖn ph√≠</h1>
            <p id="headerSubtitle" class="text-indigo-200 text-xs">Danh m·ª•c t√†i kho·∫£n</p>
        </div>

        <div class="p-6 flex-1 flex flex-col relative">
            
            <!-- Ph·∫ßn Intro v√† Li√™n h·ªá -->
            <div id="introSection" class="bg-blue-50 border border-blue-100 rounded-xl p-5 text-left mb-6">
                <h2 class="text-base font-bold text-blue-800 mb-2 flex items-center gap-2"><span>üëã</span> Xin ch√†o!</h2>
                <p class="text-sm text-blue-600 mb-4 leading-relaxed text-justify">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi <strong>D·ª± √°n chia s·∫ª t√†i kho·∫£n mi·ªÖn ph√≠</strong>. Ch√∫ng t√¥i cung c·∫•p c√°c t√†i kho·∫£n Premium ph·ª•c v·ª• c·ªông ƒë·ªìng ho√†n to√†n phi l·ª£i nhu·∫≠n.</p>
                <a href="https://facebook.com/DTH.3006" target="_blank" class="flex items-center justify-center gap-2 w-full bg-white text-blue-600 px-4 py-2 rounded-lg font-bold shadow-sm border border-blue-200 hover:bg-blue-50 transition-colors text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg> Li√™n h·ªá Admin (ƒê√†o Th√°i H·∫£i)
                </a>
            </div>

            <div id="navBar" class="hidden flex items-center gap-2 mb-4 text-sm text-gray-500">
                <button onclick="showFolders()" class="hover:text-indigo-600 flex items-center gap-1 font-medium transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg> Quay l·∫°i
                </button>
                <span class="text-gray-300">/</span>
                <span id="currentFolderName" class="text-indigo-600 font-bold truncate max-w-[150px]">...</span>
            </div>

            <div class="mb-6 flex-1">
                <div id="extraHeaderContent" class="hidden mb-5"></div>
                
                <!-- D√≤ng Update -->
                <div id="lastUpdateLabel" class="flex items-center justify-center gap-2 mb-2 text-xs text-blue-500 italic font-medium">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
                    </span>
                    L·∫ßn update g·∫ßn nh·∫•t: 04:44 06/12/2025
                </div>

                <div id="listTitle" class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Ch·ªçn danh m·ª•c</div>
                <div id="listContainer" class="grid grid-cols-1 gap-3 fade-in pb-2"></div>
            </div>
            
            <div id="homeFooter" class="mt-auto pt-4 border-t border-gray-100 fade-in">
                <p class="text-center text-[10px] text-gray-400 mt-2 font-medium">D·ª± √°n ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi ƒê√†o Th√°i H·∫£i</p>
            </div>
        </div>
    </div>

    <!-- SCRIPT -->
    <script>
        // DOM Elements
        const listContainer = document.getElementById('listContainer');
        const listTitle = document.getElementById('listTitle');
        const navBar = document.getElementById('navBar');
        const currentFolderNameEl = document.getElementById('currentFolderName');
        const headerSubtitle = document.getElementById('headerSubtitle');
        const disclaimerModal = document.getElementById('disclaimerModal');
        const disclaimerList = document.getElementById('disclaimerList'); 
        const confirmBtn = document.getElementById('confirmBtn');
        const instructionModal = document.getElementById('instructionModal');
        const donateModal = document.getElementById('donateModal'); 
        const homeFooter = document.getElementById('homeFooter'); 
        const extraHeaderContent = document.getElementById('extraHeaderContent'); 
        const capcutGuideModal = document.getElementById('capcutGuideModal');
        const capcutGuideTitle = document.getElementById('capcutGuideTitle');
        const capcutGuideContent = document.getElementById('capcutGuideContent');
        const lastUpdateLabel = document.getElementById('lastUpdateLabel');
        const introSection = document.getElementById('introSection');
        const passwordModal = document.getElementById('passwordModal');
        const modalPasswordInput = document.getElementById('modalPasswordInput');
        const modalLoginError = document.getElementById('modalLoginError');

        let currentFolderIndex = -1;
        let currentAccountIndex = -1;
        let pendingFolderIndex = -1; 
        let disclaimerTimer = null; 

        // === D·ªÆ LI·ªÜU T√ÄI KHO·∫¢N (ƒê·ªãnh nghƒ©a tr∆∞·ªõc khi d√πng) ===
        const DATA = [
            {
                id: 'chatgpt-go', name: "CHAT GPT GO", icon: `<img src="https://sf-static.upanhlaylink.com/img/image_20251206a747b4284acd312266df6c38d026cf9c.jpg" alt="ChatGPT Go" class="w-full h-full rounded-full object-cover border-2 border-white/50">`,
                notes: ["T√†i kho·∫£n d√πng chung", "Kh√¥ng ƒë·ªïi m·∫≠t kh·∫©u"],
                accounts: [
                    { name: "GPT Go 1", username: "gptgo1@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" }, 
                    { name: "GPT Go 2", username: "gptgo2@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "GPT Go 3", username: "gptgo3@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "GPT Go 4", username: "gptgo4@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "GPT Go 5", username: "gptgo5@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" }
                ]
            },
            {
                id: 'chatgpt', name: "CHAT GPT PLUS", maintenance: true, icon: `<img src="https://sf-static.upanhlaylink.com/img/image_20251206a747b4284acd312266df6c38d026cf9c.jpg" alt="ChatGPT" class="w-full h-full rounded-full object-cover grayscale border-2 border-white/50">`,
                notes: [], accounts: []
            },
            {
                id: 'capcut', name: "CAPCUT PRO", icon: `<img src="https://sf-static.upanhlaylink.com/img/image_2025120621c345d39762430df4652d172b019245.jpg" alt="CapCut" class="w-full h-full rounded-full object-cover border-2 border-white/50">`,
                notes: ["Kh√¥ng ƒëƒÉng xu·∫•t thi·∫øt b·ªã kh√°c"],
                accounts: [
                    { name: "CapCut 1", username: "capcut1@email.com", password: "123", secret: "HXDMVJECJJWSRB3HWIZR4IFUGFTMXBOZ" },
                    { name: "CapCut 2", username: "capcut2@email.com", password: "123", secret: "HXDMVJECJJWSRB3HWIZR4IFUGFTMXBOZ" },
                    { name: "CapCut 3", username: "capcut3@email.com", password: "123", secret: "HXDMVJECJJWSRB3HWIZR4IFUGFTMXBOZ" },
                    { name: "CapCut 4", username: "capcut4@email.com", password: "123", secret: "HXDMVJECJJWSRB3HWIZR4IFUGFTMXBOZ" },
                    { name: "CapCut 5", username: "capcut5@email.com", password: "123", secret: "HXDMVJECJJWSRB3HWIZR4IFUGFTMXBOZ" }
                ]
            },
            {
                id: 'studocu', name: "STUDOCU PREMIUM", icon: `<img src="https://sf-static.upanhlaylink.com/img/image_20251206b36cdc7ce5265c711f4602636e1b786b.jpg" alt="Studocu" class="w-full h-full rounded-full object-cover border-2 border-white/50">`,
                notes: ["T√†i kho·∫£n d√πng chung", "Kh√¥ng ƒë·ªïi m·∫≠t kh·∫©u"],
                accounts: [
                    { name: "Studocu 1", username: "studocu1@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "Studocu 2", username: "studocu2@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "Studocu 3", username: "studocu3@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "Studocu 4", username: "studocu4@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" },
                    { name: "Studocu 5", username: "studocu5@email.com", password: "123", secret: "JBSWY3DPEHPK3PXP" }
                ]
            },
            {
                id: 'canva-pro', name: "NH·∫¨N CANVA PRO", icon: `<img src="https://sf-static.upanhlaylink.com/img/image_20251206b1a69255ebd2141cd6c4d2bcae849ff6.jpg" alt="Canva" class="w-full h-full rounded-full object-cover border-2 border-white/50">`,
                type: 'link', url: 'https://www.canva.com/'
            },
            {
                id: 'donate', name: "DONATE ·ª¶NG H·ªò", icon: `<img src="https://cdn-icons-png.flaticon.com/512/2913/2913092.png" alt="Donate" class="w-full h-full object-contain p-1">`,
                type: 'donate'
            }
        ];

        // === LOGIC ===
        function openDonate() { donateModal.classList.remove('hidden'); donateModal.classList.add('flex'); }
        function closeDonate() { donateModal.classList.add('hidden'); donateModal.classList.remove('flex'); }
        
        function copyText(text, btnElement) {
            const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el); 
            if(btnElement) {
                const original = btnElement.innerHTML;
                btnElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;
                setTimeout(() => btnElement.innerHTML = original, 1000);
            }
        }

        function openInstructions() { instructionModal.classList.remove('hidden'); instructionModal.classList.add('flex'); }
        function closeInstructions() { instructionModal.classList.add('hidden'); instructionModal.classList.remove('flex'); }

        function openCapcutGuide(type) {
            capcutGuideModal.classList.remove('hidden'); capcutGuideModal.classList.add('flex');
            if (type === 'mobile') {
                capcutGuideTitle.textContent = "H∆∞·ªõng d·∫´n ƒëƒÉng nh·∫≠p (Mobile)";
                capcutGuideContent.innerHTML = `
                    <ol class="list-decimal pl-5 space-y-2 marker:text-indigo-600 marker:font-bold">
                        <li>M·ªü ·ª©ng d·ª•ng <strong>CapCut</strong> tr√™n ƒëi·ªán tho·∫°i.</li>
                        <li>Ch·ªçn m·ª•c <strong>T√¥i (Profile)</strong> ·ªü g√≥c d∆∞·ªõi c√πng b√™n ph·∫£i.</li>
                        <li>Ch·ªçn <strong>ƒêƒÉng nh·∫≠p b·∫±ng Email</strong>.</li>
                        <li>Nh·∫≠p t√†i kho·∫£n & m·∫≠t kh·∫©u t·ª´ danh s√°ch.</li>
                        <li>N·∫øu h·ªá th·ªëng y√™u c·∫ßu m√£ x√°c minh, quay l·∫°i ƒë√¢y v√† l·∫•y m√£ 6 s·ªë.</li>
                    </ol>
                    <div class="mt-3 p-3 bg-yellow-50 text-yellow-700 text-xs rounded border border-yellow-100"><strong>L∆∞u √Ω:</strong> Tuy·ªát ƒë·ªëi kh√¥ng ƒëƒÉng xu·∫•t c√°c thi·∫øt b·ªã kh√°c trong t√†i kho·∫£n.</div>`;
            } else {
                capcutGuideTitle.textContent = "H∆∞·ªõng d·∫´n ƒëƒÉng nh·∫≠p (PC)";
                capcutGuideContent.innerHTML = `
                    <ol class="list-decimal pl-5 space-y-2 marker:text-blue-600 marker:font-bold">
                        <li>M·ªü ph·∫ßn m·ªÅm <strong>CapCut</strong> tr√™n m√°y t√≠nh.</li>
                        <li>Click v√†o bi·ªÉu t∆∞·ª£ng <strong>Avatar</strong> ·ªü g√≥c tr√™n c√πng b√™n tr√°i.</li>
                        <li>Ch·ªçn n√∫t <strong>Sign in</strong> (ƒêƒÉng nh·∫≠p).</li>
                        <li>Ch·ªçn ti·∫øp <strong>Sign in with Email</strong>.</li>
                        <li>Nh·∫≠p Email v√† M·∫≠t kh·∫©u, sau ƒë√≥ nh·∫≠p m√£ 2FA t·ª´ web n√†y n·∫øu ƒë∆∞·ª£c h·ªèi.</li>
                    </ol>`;
            }
        }
        function closeCapcutGuide() { capcutGuideModal.classList.add('hidden'); capcutGuideModal.classList.remove('flex'); }

        // --- LOGIC MODAL M·∫¨T KH·∫®U ---
        function openPasswordModal(index) {
            pendingFolderIndex = index;
            modalLoginError.classList.add('hidden');
            modalPasswordInput.value = '';
            modalPasswordInput.classList.remove('border-red-500', 'shake');
            passwordModal.classList.remove('hidden');
            passwordModal.classList.add('flex');
            setTimeout(() => modalPasswordInput.focus(), 100);
        }

        function closePasswordModal() {
            passwordModal.classList.add('hidden');
            passwordModal.classList.remove('flex');
            pendingFolderIndex = -1;
        }

        function checkModalAutoLogin() {
            const val = modalPasswordInput.value; 
            modalLoginError.classList.add('hidden');
            modalPasswordInput.classList.remove('border-red-500', 'shake');

            if (val.length === 4) {
                if (val === '3066') {
                    passwordModal.classList.add('hidden');
                    passwordModal.classList.remove('flex');
                    tryOpenFolder(pendingFolderIndex); 
                } else {
                    modalLoginError.classList.remove('hidden');
                    modalPasswordInput.classList.add('border-red-500', 'shake');
                    setTimeout(() => { modalPasswordInput.classList.remove('shake'); }, 500);
                }
            }
        }

        function checkModalPassword() {
            const val = modalPasswordInput.value;
            if (val === '3066') { 
                passwordModal.classList.add('hidden');
                passwordModal.classList.remove('flex');
                tryOpenFolder(pendingFolderIndex);
            } else { 
                modalLoginError.classList.remove('hidden'); 
                modalPasswordInput.classList.add('border-red-500', 'shake');
                modalPasswordInput.value = ''; 
                modalPasswordInput.focus(); 
                setTimeout(() => { modalPasswordInput.classList.remove('shake'); }, 500); 
            }
        }

        function showFolders() {
            currentFolderIndex = -1; currentAccountIndex = -1;
            if(navBar) navBar.classList.add('hidden'); 
            if(extraHeaderContent) extraHeaderContent.classList.add('hidden'); 
            if(homeFooter) homeFooter.classList.remove('hidden'); 
            if(listTitle) listTitle.textContent = "DANH M·ª§C T√ÄI KHO·∫¢N"; 
            if(headerSubtitle) headerSubtitle.textContent = "Ch·ªçn danh m·ª•c ƒë·ªÉ xem";
            if(lastUpdateLabel) lastUpdateLabel.classList.remove('hidden');

            listContainer.innerHTML = '';
            
            DATA.forEach((folder, index) => {
                if (folder.type === 'donate') {
                    const divider = document.createElement('div');
                    divider.className = "border-t border-gray-200/60 my-1 mx-2";
                    listContainer.appendChild(divider);
                }

                const btn = document.createElement('button');
                btn.className = `w-full text-left p-2.5 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 hover:border-indigo-300 hover:shadow-md transition-all flex items-center gap-3 group`;
                
                if (folder.maintenance) { btn.onclick = () => alert("ƒêang b·∫£o tr√¨, h√£y quay l·∫°i sau"); btn.classList.add('opacity-75', 'bg-gray-50'); } 
                else if (folder.type === 'link') { btn.onclick = () => window.open(folder.url, '_blank'); btn.classList.add('border-indigo-100', 'bg-gradient-to-r', 'from-white', 'to-indigo-50/30'); } 
                else if (folder.type === 'donate') { btn.onclick = () => openDonate(); btn.classList.add('border-pink-100', 'bg-gradient-to-r', 'from-white', 'to-pink-50/30'); } 
                else { 
                    btn.onclick = () => openPasswordModal(index); 
                }
                
                let subtitle = folder.maintenance ? "ƒêang b·∫£o tr√¨" : (folder.type === 'link' ? "Truy c·∫≠p ngay" : (folder.type === 'donate' ? "·ª¶ng h·ªô Admin" : `${folder.accounts.length} t√†i kho·∫£n`));
                let iconBgClass = "w-11 h-11 rounded-full flex items-center justify-center font-bold text-2xl border-2 border-white shadow-sm overflow-hidden bg-gray-50 flex-shrink-0";
                
                // --- TH√äM BI·ªÇU T∆Ø·ª¢NG FREE ---
                let badge = '';
                if (folder.type !== 'donate') {
                    badge = `<span class="ml-2 bg-green-100 text-green-600 text-[9px] px-1.5 py-0.5 rounded border border-green-200 font-bold flex-shrink-0">FREE</span>`;
                }
                // -----------------------------

                btn.innerHTML = `
                    <div class="${iconBgClass}">${folder.icon}</div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center">
                            <span class="font-bold text-gray-800 text-sm group-hover:text-indigo-700 truncate">${folder.name}</span>
                            ${badge}
                        </div>
                        <div class="text-[10px] text-gray-400 font-medium truncate">${subtitle}</div>
                    </div>
                    <svg class="w-4 h-4 text-gray-300 group-hover:text-indigo-500 transition-all flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                `;
                listContainer.appendChild(btn);
            });
        }

        function tryOpenFolder(index) {
            pendingFolderIndex = index;
            const folder = DATA[index];
            disclaimerList.innerHTML = ''; 
            (folder.notes || []).forEach(note => {
                const li = document.createElement('li'); li.className = "flex items-start gap-2"; li.innerHTML = `<span class="text-red-500 font-bold">‚Ä¢</span><span>${note}</span>`; disclaimerList.appendChild(li);
            });
            disclaimerModal.classList.remove('hidden'); disclaimerModal.classList.add('flex');
            
            let timeLeft = 3; confirmBtn.disabled = true; confirmBtn.className = "mt-6 w-full bg-gray-400 text-white font-bold py-3 rounded-xl transition-all cursor-not-allowed text-sm uppercase tracking-wide"; confirmBtn.textContent = `Vui l√≤ng ch·ªù ${timeLeft}s...`;
            if (disclaimerTimer) clearInterval(disclaimerTimer);
            disclaimerTimer = setInterval(() => {
                timeLeft--;
                if (timeLeft > 0) confirmBtn.textContent = `Vui l√≤ng ch·ªù ${timeLeft}s...`;
                else {
                    clearInterval(disclaimerTimer); confirmBtn.disabled = false; confirmBtn.className = "mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg"; confirmBtn.textContent = "ƒê√£ hi·ªÉu & Ti·∫øp t·ª•c";
                }
            }, 1000);
        }

        function confirmDisclaimer() {
            disclaimerModal.classList.add('hidden'); disclaimerModal.classList.remove('flex');
            if (pendingFolderIndex !== -1) actuallyOpenFolder(pendingFolderIndex);
        }

        function actuallyOpenFolder(index) {
            currentFolderIndex = index; currentAccountIndex = -1;
            const folder = DATA[index];
            navBar.classList.remove('hidden'); homeFooter.classList.add('hidden'); 
            introSection.classList.add('hidden');
            listTitle.textContent = `DANH S√ÅCH T√ÄI KHO·∫¢N`; headerSubtitle.textContent = folder.name;

            if(lastUpdateLabel) lastUpdateLabel.classList.add('hidden');

            extraHeaderContent.innerHTML = '';
            if (folder.id === 'capcut') {
                extraHeaderContent.classList.remove('hidden');
                extraHeaderContent.innerHTML = `
                    <div class="grid grid-cols-2 gap-3 fade-in">
                        <button onclick="openCapcutGuide('mobile')" class="flex items-center justify-center gap-2 py-2 px-3 bg-indigo-50 text-indigo-600 rounded-lg text-xs font-bold border border-indigo-100 hover:bg-indigo-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg> HD ƒêƒÉng nh·∫≠p ƒêT</button>
                        <button onclick="openCapcutGuide('pc')" class="flex items-center justify-center gap-2 py-2 px-3 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold border border-blue-100 hover:bg-blue-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg> HD ƒêƒÉng nh·∫≠p PC</button>
                    </div>`;
            } else { extraHeaderContent.classList.add('hidden'); }

            listContainer.innerHTML = '';

            if (folder.id === 'chatgpt-go') {
                const noteDiv = document.createElement('div');
                noteDiv.className = "mb-3 p-3 text-center text-xs text-blue-500 italic bg-blue-50 rounded-xl border border-blue-100";
                noteDiv.innerHTML = "L∆∞u √Ω: T√†i kho·∫£n n·∫øu b·ªã h·∫øt l∆∞·ª£ng d√πng th√¨ v√†o t√†i kho·∫£n kh√°c nha";
                listContainer.appendChild(noteDiv);
            }

            folder.accounts.forEach((acc, accIndex) => {
                const wrapper = document.createElement('div'); wrapper.className = "mb-3";
                const btn = document.createElement('button');
                btn.className = `w-full text-left px-4 py-3 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-all flex items-center gap-3 group focus:outline-none focus:ring-2 focus:ring-indigo-500 z-10 relative`;
                btn.onclick = () => selectAccount(accIndex);
                btn.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center font-bold text-sm group-hover:bg-indigo-600 group-hover:text-white transition-colors">${accIndex + 1}</div>
                    <div class="flex-1">
                        <div class="acc-name font-medium text-gray-700 group-hover:text-gray-900">${acc.name}</div>
                        <div class="acc-user text-xs text-gray-400 truncate w-32 font-mono">${acc.username}</div>
                    </div>
                    <svg class="w-4 h-4 text-gray-300 group-hover:text-indigo-600 transform transition-transform duration-300 chevron-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                `;

                const detailDiv = document.createElement('div');
                detailDiv.id = `detail-${accIndex}`;
                detailDiv.className = "accordion-content bg-slate-50 border-x border-b border-gray-200 rounded-b-xl mx-2 -mt-2 pt-0 px-4 pb-0 hidden";
                
                let otpHtml = '';
                if (folder.id !== 'capcut' && folder.id !== 'studocu') {
                    otpHtml = `
                        <div id="otp-container-${accIndex}" class="flex items-center justify-between bg-white border-2 border-indigo-100 p-2 rounded-lg mt-2 transition-colors duration-1000">
                            <div class="flex flex-col">
                                <span class="text-[10px] text-gray-400 font-bold uppercase">M√£ 2FA</span>
                                <div class="font-mono font-bold text-indigo-600 text-lg tracking-widest otp-display" id="otp-val-${accIndex}">... ...</div>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="relative w-8 h-8 flex items-center justify-center">
                                    <svg class="transform -rotate-90 w-8 h-8">
                                        <circle cx="16" cy="16" r="13" stroke="#e2e8f0" stroke-width="2" fill="transparent" />
                                        <circle id="timer-ring-${accIndex}" cx="16" cy="16" r="13" stroke="#6366f1" stroke-width="2" fill="transparent" class="progress-ring" stroke-dasharray="81.68" stroke-dashoffset="0" />
                                    </svg>
                                    <span id="timer-text-${accIndex}" class="absolute text-[10px] font-bold text-gray-600">30</span>
                                </div>
                                <button onclick="copyToClipboardText(document.getElementById('otp-val-${accIndex}').innerText.replace(/\\s/g,''), this)" class="bg-indigo-50 text-indigo-600 p-2 rounded-md hover:bg-indigo-100 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg>
                                </button>
                            </div>
                        </div>
                    `;
                }

                detailDiv.innerHTML = `
                    <div class="space-y-2 py-4">
                        <div class="flex items-center gap-2 bg-white border border-gray-200 p-2 rounded-lg">
                            <input type="text" readonly value="${acc.username}" class="bg-transparent outline-none text-xs text-gray-600 font-mono w-full">
                            <button onclick="copyToClipboardText('${acc.username}', this)" class="text-gray-400 hover:text-indigo-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg></button>
                        </div>
                        <div class="flex items-center gap-2 bg-white border border-gray-200 p-2 rounded-lg">
                            <input type="text" readonly value="${acc.password}" class="bg-transparent outline-none text-xs text-gray-600 font-mono w-full">
                            <button onclick="copyToClipboardText('${acc.password}', this)" class="text-gray-400 hover:text-indigo-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg></button>
                        </div>
                        <p class="text-[10px] text-red-500 italic">L∆∞u √Ω: M·∫≠t kh·∫©u thay ƒë·ªïi th∆∞·ªùng xuy√™n</p>
                        ${otpHtml}
                    </div>
                `;
                wrapper.appendChild(btn); wrapper.appendChild(detailDiv); listContainer.appendChild(wrapper);
            });
        }

        function selectAccount(accIndex) {
            const allDetails = document.querySelectorAll('.accordion-content');
            const targetDetail = document.getElementById(`detail-${accIndex}`);
            const wrapper = targetDetail.parentElement;
            const btn = wrapper.querySelector('button');
            const chevron = btn.querySelector('.chevron-icon');
            const nameEl = btn.querySelector('.acc-name');
            const userEl = btn.querySelector('.acc-user');
            const isClosed = targetDetail.classList.contains('hidden');

            allDetails.forEach(el => {
                el.classList.add('hidden'); el.classList.remove('open'); 
                const parentBtn = el.parentElement.querySelector('button');
                parentBtn.classList.remove('border-indigo-500', 'bg-indigo-50');
                el.parentElement.querySelector('.chevron-icon').classList.remove('rotate-180');
                const pName = parentBtn.querySelector('.acc-name');
                const pUser = parentBtn.querySelector('.acc-user');
                if(pName) { pName.classList.remove('text-indigo-700', 'font-bold'); pName.classList.add('text-gray-700', 'font-medium'); }
                if(pUser) { pUser.classList.remove('text-indigo-600'); pUser.classList.add('text-gray-400'); }
            });

            if (isClosed) {
                targetDetail.classList.remove('hidden');
                setTimeout(() => { targetDetail.classList.add('open'); }, 10);
                btn.classList.add('border-indigo-500', 'bg-indigo-50');
                chevron.classList.add('rotate-180');
                if(nameEl) { nameEl.classList.remove('text-gray-700', 'font-medium'); nameEl.classList.add('text-indigo-700', 'font-bold'); }
                if(userEl) { userEl.classList.remove('text-gray-400'); userEl.classList.add('text-indigo-600'); }
                currentAccountIndex = accIndex; 
                if (DATA[currentFolderIndex].id !== 'capcut' && DATA[currentFolderIndex].id !== 'studocu') updateOTP();
            } else { currentAccountIndex = -1; }
        }

        function copyToClipboardText(text, btnElement) {
            const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el); 
            if(btnElement) {
                const original = btnElement.innerHTML;
                btnElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;
                setTimeout(() => btnElement.innerHTML = original, 1000);
            }
        }

        const circumference = 81.68;

        function updateLoop() {
            const epoch = Math.round(new Date().getTime() / 1000.0); const countDown = 30 - (epoch % 30);
            
            if (currentFolderIndex !== -1 && currentAccountIndex !== -1 && DATA[currentFolderIndex].id !== 'capcut' && DATA[currentFolderIndex].id !== 'studocu') {
                updateOTP();
                const ring = document.getElementById(`timer-ring-${currentAccountIndex}`);
                const text = document.getElementById(`timer-text-${currentAccountIndex}`);
                const container = document.getElementById(`otp-container-${currentAccountIndex}`);

                if (ring && text) {
                    text.textContent = countDown;
                    const offset = circumference - ((countDown / 30) * 100 / 100) * circumference;
                    ring.style.strokeDashoffset = offset;
                    if (countDown <= 5) { ring.style.stroke = "#ef4444"; text.classList.add('text-red-500'); } 
                    else { ring.style.stroke = "#6366f1"; text.classList.remove('text-red-500'); }
                }

                if (container) {
                    if (countDown <= 15) {
                        const p = (15 - countDown) / 15; 
                        const r = Math.round(224 + (239 - 224) * p);
                        const g = Math.round(231 + (68 - 231) * p);
                        const b = Math.round(255 + (68 - 255) * p);
                        container.style.borderColor = `rgb(${r}, ${g}, ${b})`;
                        if(countDown <= 5) container.style.boxShadow = `0 0 10px rgba(239, 68, 68, ${p * 0.5})`;
                    } else {
                        container.style.borderColor = 'rgb(224, 231, 255)'; container.style.boxShadow = 'none';
                    }
                }
            }
        }

        function updateOTP() {
            if (currentFolderIndex === -1 || currentAccountIndex === -1) return;
            const acc = DATA[currentFolderIndex].accounts[currentAccountIndex];
            const otpDisplay = document.getElementById(`otp-val-${currentAccountIndex}`);
            if (otpDisplay) {
                try {
                    const cleanSecret = acc.secret.replace(/\s/g, '').toUpperCase();
                    const totp = new OTPAuth.TOTP({ algorithm: "SHA1", digits: 6, period: 30, secret: OTPAuth.Secret.fromBase32(cleanSecret) });
                    const token = totp.generate();
                    otpDisplay.textContent = token; 
                } catch (e) { otpDisplay.textContent = "L·ªñI KEY"; }
            }
        }

        function startApp() { showFolders(); updateLoop(); setInterval(updateLoop, 1000); }

        // === KH·ªûI CH·∫†Y NGAY L·∫¨P T·ª®C ===
        startApp();
    </script>
</body>
</html>
